(()=>{"use strict";var e,t={970:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={autoConnect:!1,rememberConnectedServer:!1,proxyDns:!0,enableNotifications:!0,enableIpv6Lookups:!1,enableNotificationsOnlyErrors:!1,enableDebugInfo:!1,enableExcludeList:!1,excludeList:[]}},627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventTarget=void 0;class n extends EventTarget{addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}dispatchEvent(e){return super.dispatchEvent(e)}}t.TypedEventTarget=n},850:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TypedStorageArea=void 0,t.TypedStorageArea=class{constructor(e){this.storageArea=e}get(e){return n(this,void 0,void 0,(function*(){return yield this.storageArea.get(e)}))}getBytesInUse(e){return n(this,void 0,void 0,(function*(){return yield this.storageArea.getBytesInUse(e)}))}set(e){return n(this,void 0,void 0,(function*(){yield this.storageArea.set(e)}))}remove(e){return n(this,void 0,void 0,(function*(){yield this.storageArea.remove(e)}))}clear(){return n(this,void 0,void 0,(function*(){yield this.storageArea.clear()}))}}},541:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;class n{constructor(e){this.prefix=e}log(e,t){const n=`${this.prefix} (Log): ${e}`;t?console.log(n,t):console.log(n)}info(e,t){const n=`${this.prefix} (Info): ${e}`;t?console.info(n,t):console.info(n)}error(e,t){const n=`${this.prefix} (Error): ${e}`;return t?console.error(n,t):console.error(n),new Error(n)}}t.Logger=n,t.default=new n("mullvad")},748:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(970)),r=i(n(541)),l=n(627),s=new(n(850).TypedStorageArea)(browser.storage.sync);t.default=new class extends l.TypedEventTarget{constructor(){super(),this.onStorageChanged=this.onStorageChanged.bind(this),browser.storage.onChanged.addListener(this.onStorageChanged),window.addEventListener("unload",(()=>{browser.storage.onChanged.removeListener(this.onStorageChanged)}))}onStorageChanged(e,t){if("sync"===t&&"options"in e){const{oldValue:t,newValue:n}=e.options,o=[];for(const e of Object.keys(n)){if(t){if(!(e in t))continue;const o=t[e],i=n[e];if(o===i)continue;if(o instanceof Array&&i instanceof Array&&o.length===i.length&&o.every(((e,t)=>e===i[t])))continue}o.push(e)}this.dispatchEvent(new CustomEvent("changed",{detail:o}))}}getAll(){return o(this,void 0,void 0,(function*(){const{options:e}=yield s.get("options");return e}))}setAll(e=a.default){return o(this,void 0,void 0,(function*(){return s.set({options:e})}))}get(e){return o(this,void 0,void 0,(function*(){const t=yield this.getAll();if(t.hasOwnProperty(e))return t[e];throw r.default.error(`Failed to find option ${e} in storage.`)}))}set(e,t){return o(this,void 0,void 0,(function*(){const n=yield this.getAll();return n[e]=t,this.setAll(n)}))}update(e=a.default){return o(this,void 0,void 0,(function*(){const t=yield this.getAll();t||this.setAll();for(const[n,o]of Object.entries(e))t.hasOwnProperty(n)||(t[n]=o);return this.setAll(t)}))}}},721:function(e,t){var n,o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getMinutesInMs=t.getBrowserType=t.BrowserType=void 0,function(e){e[e.Chromium=0]="Chromium",e[e.Firefox=1]="Firefox",e[e.Unknown=2]="Unknown"}(n=t.BrowserType||(t.BrowserType={})),t.getBrowserType=function(){return o(this,void 0,void 0,(function*(){const e=browser.runtime.getBrowserInfo;return e?"firefox"===(yield e()).name.toLowerCase()?n.Firefox:n.Unknown:n.Chromium}))},t.getMinutesInMs=function(e){return 60*e*1e3}},876:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(850);t.default=new o.TypedStorageArea(browser.storage.local)},454:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function l(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((o=o.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsView=void 0;const s=l(n(776)),c=l(n(748)),u=a(n(721)),d=l(n(876)),p=browser.i18n.getMessage;class f extends s.default.Component{constructor(e){super(e),this.state={browserType:u.BrowserType.Unknown},this.handleInputChange=this.handleInputChange.bind(this),this.handleExcludeListChange=this.handleExcludeListChange.bind(this),this.handleClearCache=this.handleClearCache.bind(this),this.handleClearRecentServers=this.handleClearRecentServers.bind(this)}componentDidMount(){return r(this,void 0,void 0,(function*(){this.setState({options:yield c.default.getAll(),browserType:yield u.getBrowserType()}),c.default.addEventListener("changed",(()=>r(this,void 0,void 0,(function*(){this.setState({options:yield c.default.getAll()})}))))}))}render(){var e,t,n,o,i,a,r,l;return s.default.createElement("form",{className:"options"},this.state.options&&s.default.createElement(s.default.Fragment,null,s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"autoConnect",type:"checkbox",checked:null===(e=this.state.options)||void 0===e?void 0:e.autoConnect,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsAutoConnectLabel")),s.default.createElement("div",{className:"option__description"},p("optionsAutoConnectDescription")),s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"rememberConnectedServer",type:"checkbox",checked:null===(t=this.state.options)||void 0===t?void 0:t.rememberConnectedServer,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsRememberConnectedServerLabel")),s.default.createElement("div",{className:"option__description"},p("optionsRememberConnectedServerDescription")))),s.default.createElement("hr",null),s.default.createElement("label",{className:"option option--inline proxy-dns-option"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"proxyDns",type:"checkbox",checked:null===(n=this.state.options)||void 0===n?void 0:n.proxyDns,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsProxyDnsLabel")),s.default.createElement("div",{className:"option__description"},p("optionsProxyDnsDescription"))),s.default.createElement("hr",null),s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"enableNotifications",type:"checkbox",checked:null===(o=this.state.options)||void 0===o?void 0:o.enableNotifications,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsEnableNotificationsLabel")),s.default.createElement("div",{className:"option__description"},p("optionsEnableNotificationsDescription")),s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"enableNotificationsOnlyErrors",type:"checkbox",checked:null===(i=this.state.options)||void 0===i?void 0:i.enableNotificationsOnlyErrors,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsEnableNotificationsOnlyErrorsLabel")))),s.default.createElement("hr",null),s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"enableIpv6Lookups",type:"checkbox",checked:null===(a=this.state.options)||void 0===a?void 0:a.enableIpv6Lookups,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsEnableIpv6LookupsLabel")),s.default.createElement("div",{className:"option__description"},p("optionsEnableIpv6LookupsDescription"))),s.default.createElement("hr",null),s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"enableDebugInfo",type:"checkbox",checked:null===(r=this.state.options)||void 0===r?void 0:r.enableDebugInfo,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsEnableDebugInfoLabel")),s.default.createElement("div",{className:"option__description"},p("optionsEnableDebugInfoDescription"))),this.state.browserType===u.BrowserType.Firefox&&s.default.createElement(s.default.Fragment,null,s.default.createElement("hr",null),s.default.createElement("label",{className:"option option--inline"},s.default.createElement("div",{className:"option__control"},s.default.createElement("input",{name:"enableExcludeList",type:"checkbox",checked:null===(l=this.state.options)||void 0===l?void 0:l.enableExcludeList,onChange:this.handleInputChange})),s.default.createElement("div",{className:"option__label"},p("optionsEnableExcludeListLabel")),s.default.createElement("label",{className:"option"},s.default.createElement("div",{className:"option__label"},p("optionsExcludeListLabel")),s.default.createElement("div",{className:"option__description"},p("optionsExcludeListDescription")),s.default.createElement("div",{className:"option__control"},s.default.createElement("textarea",{name:"excludeList",onChange:this.handleExcludeListChange,value:this.state.options.excludeList.join("\n"),rows:8})))))),s.default.createElement("hr",null),s.default.createElement("div",{className:"buttons"},s.default.createElement("button",{onClick:this.handleClearCache},p("optionsClearCacheLabel")),s.default.createElement("button",{onClick:this.handleClearRecentServers},p("optionsClearRecentServersLabel"))))}handleClearCache(){d.default.remove(["serverList","serverListFrom"])}handleClearRecentServers(){d.default.remove(["recentServers"])}handleInputChange(e){this.setState((t=>(t.options&&(t.options[e.target.name]=function(e){switch(e.type){case"checkbox":return e.checked;case"number":return parseFloat(e.value);default:return e.value}}(e.target),this.saveOptions()),t)))}handleExcludeListChange(e){this.setState((t=>(t.options&&(""===e.target.value&&(t.options.excludeList=[]),t.options.excludeList=e.target.value.split("\n"),this.saveOptions()),t)))}saveOptions(){return r(this,void 0,void 0,(function*(){yield c.default.setAll(this.state.options)}))}}t.OptionsView=f},114:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(776)),a=o(n(776)),r=n(454);n(82),a.default.render(i.default.createElement(r.OptionsView,null),document.body)},82:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(721));r.getBrowserType().then((e=>{const t=document.createElement("link");switch(t.rel="stylesheet",e){case r.BrowserType.Firefox:t.href=browser.runtime.getURL("ui/options/options-firefox.css");break;case r.BrowserType.Chromium:t.href=browser.runtime.getURL("ui/options/options-chromium.css");break;default:return}document.head.append(t)}))}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,i,a)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,i,a]=e[u],l=!0,s=0;s<n.length;s++)(!1&a||r>=a)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={831:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[r,l,s]=n,c=0;if(r.some((t=>0!==e[t]))){for(i in l)o.o(l,i)&&(o.m[i]=l[i]);if(s)var u=s(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[514],(()=>o(114)));i=o.O(i)})();